<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wenshu</title>
    <script src="__JS__/jquery-1.12.4.min.js"></script>
</head>
<body>
<div class="btn">POST</div>
<!-- <script src=""></script> -->
<script type="text/javascript">
    $(function() {
        $('.btn').click(function() {
            var url = 'http://wenshu.court.gov.cn/website/parse/rest.q4w';
            var param = {};

            console.log();
            return;

            // $.post(url, param, function(data, textStatus, xhr) {
            // });

            $.ajax({
                url: url,
                type: 'POST',
                // dataType: 'json',
                data: JSON.stringify({
                    phone: tel,
                    publicId: getcookie().publicId,
                    header: header,
                    authCode: code,
                    focusTime: Date.parse(new Date())
                }),
                contentType: "application/x-www-form-urlencoded",
                headers:{
                    key:'Cookie',
                    'Access-Control-Allow-Origin':'*'
                },
                processData: false,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("key", "Cookie");
                },
                success: function (data) {
                   
                }
            });
        });
    });

    // 出现preflight问题
    // 因为你的请求已经不是一个“简单请求”了，跨域问题中，常把复合特定条件的一些请求称为简单请求，而满足“简单请求”的条件是这样的：
    // (1)请求类型必须是GET，POST，HEAD三者中的一种
    // (2)请求头（Header）中仅仅可以包含：
    //     Accept
    //     Accept Language
    //     Content Language
    //     Last Event ID
    //     Content Type：仅接受 application/x-www-form-urlencoded，multipart/form-data，text/plain
    // 增加了一个header Access-Control-Allow-Origin，导致请求变得“不简单”了。当请求不简单时，浏览器处于安全原因，会先发送一个所谓的preflight请求，方法为OPTIONS
    // 
    // 关于跨域的更多内容，推荐看
    //   构建public APIs与CORS
    //      https://segmentfault.com/a/1190000000709909
    //   cors跨域之简单请求与预检请求（发送请求头带令牌token）
    //      https://segmentfault.com/a/1190000009971254

</script>
</body>
</html>