<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>桌面通知 Notification</title>
</head>
<body>
    <!-- 报错：Uncaught TypeError: window.Notification.checkPermission is not a function -->
    <input type="button" value="测试桌面通知" onclick="checkPermissionAndShow()" />
    <script type="text/javascript">
        window.Notification = window.Notification || window.webkitNotifications;

        function checkPermissionAndShow(){
            var perLel = window.Notification.checkPermission();//Uncaught TypeError: window.Notification.checkPermission is not a function
            if(perLel == 0){
                console.log('已授权...');
                showNotification();
            }else if(perLel ==1){
                console.log('待授权...');
                window.Notification.requestPermission(checkPermissionAndShow);
            }else{
                console.log('已禁止...');
            }

            // console.log(Notification.permission)
        }

        function showNotification(){
             var newNotification = window.Notification.createNotification(
                    'http://avatar.csdn.net/4/5/3/1_qyf_5445.jpg',
                    '桌面通知',
                    '桌面通知 示例'
                );
            newNotification.show();
        }
    </script>
</body>
</html>